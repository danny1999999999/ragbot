<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- å‹•æ…‹æ¨™é¡Œï¼šä½¿ç”¨é¡¯ç¤ºåç¨± -->
    <title>{{ display_name or bot_name }}</title>
    
    <!-- ğŸ”§ ä¿®å¾©ï¼šä½¿ç”¨ç›¸å°è·¯å¾‘ï¼Œç¢ºä¿éœæ…‹æ–‡ä»¶æ­£ç¢ºè¼‰å…¥ -->
    <link rel="stylesheet" href="modern/static/chat.css">
    
    <!-- ğŸ”§ ä¿®å¾©ï¼šä½¿ç”¨ç°¡å–®çš„ emoji favicon é¿å… 404 éŒ¯èª¤ -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ¤–</text></svg>">
    
    <!-- ğŸ”§ æ–°å¢ï¼šé è¼‰å…¥é—œéµè³‡æº -->
    <link rel="preload" href="modern/static/chat.js" as="script">
</head>
<body>
    <!-- ä¸»èŠå¤©å®¹å™¨ -->
    <div id="chat-container">
        <!-- èŠå¤©ç•Œé¢é ‚éƒ¨æ¨™é¡Œ -->
        <header id="chat-header">
            <div class="header-content">
                <div class="bot-info">
                    <!-- ğŸ”§ ä¿®å¾©ï¼šç°¡åŒ–é¡¯ç¤ºé‚è¼¯ -->
                    <h2 class="bot-title">{{ display_name or bot_name }}</h2>
                </div>
                
                <!-- é ‚éƒ¨æ§åˆ¶å€åŸŸ -->
                <div id="header-controls">
                    <!-- å­—é«”å¤§å°é¸æ“‡å™¨ -->
                    <select id="font-size-selector" aria-label="é¸æ“‡å­—é«”å¤§å°">
                        <option value="small">å°</option>
                        <option value="medium" selected>ä¸­</option>
                        <option value="large">å¤§</option>
                    </select>
                    
                    <!-- ä¸»é¡Œé¡è‰²é¸æ“‡å™¨ -->
                    <div id="theme-controls" role="group" aria-label="ä¸»é¡Œé¸æ“‡">
                        <button class="theme-selector" id="theme-blue" data-theme="blue" title="è—è‰²ä¸»é¡Œ" aria-label="è—è‰²ä¸»é¡Œ"></button>
                        <button class="theme-selector" id="theme-green" data-theme="green" title="ç¶ è‰²ä¸»é¡Œ" aria-label="ç¶ è‰²ä¸»é¡Œ"></button>
                        <button class="theme-selector" id="theme-orange" data-theme="orange" title="æ©˜è‰²ä¸»é¡Œ" aria-label="æ©˜è‰²ä¸»é¡Œ"></button>
                    </div>
                    
                    <!-- ç‹€æ…‹æŒ‡ç¤ºå™¨ -->
                    <div class="status-indicator" aria-live="polite">
                        <span class="status-dot" aria-hidden="true"></span>
                        <span class="status-text">æœå‹™ä¸­</span>
                    </div>
                </div>
            </div>
        </header>

        <!-- èŠå¤©æ¶ˆæ¯å€åŸŸ -->
        <main id="chat-messages" role="log" aria-live="polite" aria-label="èŠå¤©æ¶ˆæ¯">
            <!-- æ­¡è¿æ¶ˆæ¯ -->
            <div class="welcome-message" role="article">
                <div class="bot-avatar" aria-hidden="true">ğŸ¤–</div>
                <div class="message-content">
                    <!-- ğŸ”§ ä¿®å¾©ï¼šç°¡åŒ–æ­¡è¿æ¶ˆæ¯ -->
                    <h3>æ­¡è¿ä½¿ç”¨ {{ display_name or bot_name }}ï¼</h3>
                    <p>æˆ‘æ˜¯æ‚¨çš„æ™ºèƒ½åŠ©ç†ï¼Œéš¨æ™‚æº–å‚™ç‚ºæ‚¨æä¾›å¹«åŠ©ã€‚æ‚¨å¯ä»¥å•æˆ‘ä»»ä½•å•é¡Œï¼Œæˆ‘æœƒç›¡åŠ›ç‚ºæ‚¨è§£ç­”ã€‚</p>
                    <!-- ğŸ”§ æ–°å¢ï¼šåŠŸèƒ½æç¤º -->
                    <p><small>ğŸ’¡ æç¤ºï¼šæ‚¨å¯ä»¥ç›´æ¥è¼¸å…¥å•é¡Œï¼Œæˆ–é»æ“Šä¸‹æ–¹æ¨è–¦å•é¡Œé–‹å§‹å°è©±</small></p>
                </div>
            </div>
        </main>

        <!-- æ¨è–¦å•é¡Œå€åŸŸ -->
        <div id="recommended-questions-container" role="region" aria-label="æ¨è–¦å•é¡Œ">
            <!-- æ¨è–¦å•é¡Œå°‡é€šé JavaScript å‹•æ…‹æ·»åŠ  -->
        </div>

        <!-- è¼¸å…¥å€åŸŸ -->
        <footer id="chat-input-container">
            <div class="input-wrapper">
                <textarea 
                    id="chat-input" 
                    placeholder="è¼¸å…¥æ‚¨çš„å•é¡Œ..." 
                    rows="1"
                    autocomplete="off"
                    spellcheck="false"
                    aria-label="è¼¸å…¥æ¶ˆæ¯"
                    maxlength="2000"
                ></textarea>
                <!-- ğŸ”§ ä¿®å¾©ï¼šå­—ç¬¦è¨ˆæ•¸å™¨ä½ç½® -->
                <span id="char-counter" class="char-counter" aria-live="polite">0/2000</span>
            </div>
            <button id="send-button" type="button" aria-label="ç™¼é€æ¶ˆæ¯" disabled>
                <!-- ğŸ”§ ä¿®å¾©ï¼šè¼‰å…¥ç‹€æ…‹åœ–æ¨™ -->
                <span class="send-icon">ç™¼é€</span>
                <span class="loading-icon" style="display: none;">â³</span>
            </button>
        </footer>

        <!-- åº•éƒ¨æ§åˆ¶ä¿¡æ¯ -->
        <div id="font-controls">
            <small>ğŸ’¡ æç¤ºï¼šæŒ‰ Enter ç™¼é€ï¼ŒShift+Enter æ›è¡Œ | æœ€å¤š 2000 å­—ç¬¦</small>
        </div>
    </div>

    <!-- ğŸ”§ æ–°å¢ï¼šè¼‰å…¥ç‹€æ…‹é®ç½© -->
    <div id="loading-overlay" style="display: none;">
        <div class="loading-spinner">
            <div class="spinner"></div>
            <p>æ­£åœ¨åˆå§‹åŒ–...</p>
        </div>
    </div>

    <!-- ğŸ”§ æ–°å¢ï¼šéŒ¯èª¤æç¤º -->
    <div id="error-toast" class="error-toast" style="display: none;">
        <span id="error-message"></span>
        <button id="error-close" aria-label="é—œé–‰éŒ¯èª¤æç¤º">Ã—</button>
    </div>

    <!-- ğŸ”§ ä¿®å¾©ï¼šç¢ºä¿ JavaScript æ­£ç¢ºè¼‰å…¥ -->
    <script>
        // ğŸ”§ å…¨å±€è®Šæ•¸ï¼šæ©Ÿå™¨äººè³‡è¨Š
        window.BOT_CONFIG = {
            name: '{{ bot_name }}',
            displayName: '{{ display_name or bot_name }}',
            // å¯ä»¥åœ¨æ­¤æ·»åŠ æ›´å¤šé…ç½®
        };
        
        // ğŸ”§ éŒ¯èª¤è™•ç†ï¼šæª¢æŸ¥å¿…è¦å…ƒç´ æ˜¯å¦å­˜åœ¨
        document.addEventListener('DOMContentLoaded', function() {
            const requiredElements = [
                'chat-messages', 'chat-input', 'send-button', 
                'recommended-questions-container'
            ];
            
            for (const id of requiredElements) {
                if (!document.getElementById(id)) {
                    console.error(`å¿…è¦å…ƒç´ ç¼ºå¤±: ${id}`);
                }
            }
        });
    </script>
    <script src="modern/static/chat.js"></script>
</body>
</html>